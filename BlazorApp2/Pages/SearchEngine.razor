@page "/"
@inherits SearchEngineBase



<sction class="searchComponent">
    <div>
        <h1 class="pageTitle">Anime Search Engine</h1>
    </div>
    <div>
        <EditForm class="searchForm" Model="SearchField" OnValidSubmit="@HandleSearch">
            <DataAnnotationsValidator />
            <InputText class="dropdownBtn searchElems" placeholder="Type an Anime Name" @bind-Value="SearchField.SearchField" />
            <ValidationMessage For="()=> SearchField.SearchField" class="searchElems"></ValidationMessage>
            <button type="submit" class="dropdownBtn searchElems">Search the Anime API</button>
        </EditForm>
        @if (query != null)
        {
            <h2 class="pageTitle">Results found: @query.results.Count()</h2>
        }
    </div>
    
    <div class="row">
    @if (query != null)
    {
        @foreach (var result in query.results)
        {
            <div class="col">
                <div class="card h-100">
                    <img src="@result.image_url">
                    <div class="descriptions">
                        <h3>@result.title</h3>
                        <p>
                            @result.synopsis
                        </p>
                        <button>
                            <i class="fab fa-youtube"></i>
                            Play trailer on YouTube
                        </button>
                    </div>
                </div>
            </div>
        }

    }
    </div>

</sction>
